sources:
  hourly-native-atm2d: &base-default
    args: &args-default
      request: &request-default
        class: d1
        dataset: climate-dt
        activity: CMIP6
        experiment: hist
        generation: 1
        model: {{ model }}
        realization: 1
        resolution: high
        expver: {{ expver }}
        type: fc
        stream: clte
        date: {{ date }}
        time: '0000'
        param: 167
        levtype: sfc
        step: 0
      data_start_date: {{ data_start_date }}
      data_end_date: auto
      aggregation: D  # Default aggregation / chunk size
      savefreq: h  # at what frequency are data saved
      timestep: h  # base timestep for step timestyle
      timestyle: date  # variable date or variable step
    description: hourly data on native grid {{ grid }}.
    driver: gsv
    metadata: &metadata-default
      fdb_path: {{ fdb_path }}
      eccodes_path: {{ eccodes_path }}
      variables: {{ variables_atm2d }}
      source_grid_name: {{ grid }}
      fixer_name: ifs-nemo-destine-v1-nan

  hourly-native-atm3d:
    <<: *base-default
    description: hourly 3D atmospheric data on native grid {{ grid }}.
    args:
      <<: *args-default
      aggregation: 6H
      request:
        <<: *request-default
        param: 131
        levtype: pl
        levelist: {{ ifs_levels }}
    metadata:
      <<: *metadata-default
      levels: {{ ifs_levels }}
      variables: {{ variables_atm2d }}

  hourly-hpz7-atm2d:
    <<: *base-default
    description: hourly 2D atmospheric data on healpix grid (zoom=7, h128).
    args:
      <<: *args-default
      request:
        <<: *request-default
        resolution: standard
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/HEALPIX_grids/etc/fdb/config.yaml
      source_grid_name: hpz7-nested

  hourly-hpz7-atm3d:
    <<: *base-default
    description: hourly 3D atmospheric data on healpix grid (zoom=7, h128).
    args:
      <<: *args-default
      aggregation: 6H
      request:
        <<: *request-default
        resolution: standard
        param: 131
        levtype: pl
        levelist: {{ ifs_levels }}
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/HEALPIX_grids/etc/fdb/config.yaml
      levels: {{ ifs_levels }}
      variables: {{ variables_atm3d }}
      source_grid_name: hpz7-nested

  hourly-hpz10-atm2d:
    <<: *base-default
    description: hourly 2D atmospheric data on healpix grid (zoom=10, h1024).
    args:
      <<: *args-default
      request:
        <<: *request-default
        resolution: high
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/HEALPIX_grids/etc/fdb/config.yaml
      source_grid_name: hpz10-nested

  hourly-hpz10-atm3d:
    <<: *base-default
    description: hourly 3D atmospheric data on healpix grid (zoom=10, h1024).
    args:
      <<: *args-default
      aggregation: 6H
      request:
        <<: *request-default
        resolution: high
        param: 131
        levtype: pl
        levelist: {{ ifs_levels }}
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/HEALPIX_grids/etc/fdb/config.yaml
      levels:{{ ifs_levels }}
      variables: {{ variables_atm2d }}
      source_grid_name: hpz10-nested

  hourly-r025-atm2d:
    <<: *base-default
    description: hourly 2D atmospheric data on regular r025 grid (1440x721).
    args:
      <<: *args-default
      request:
        <<: *request-default
        resolution: standard
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/REGULARLL_grids/etc/fdb/config.yaml
      source_grid_name: era5-r025

  hourly-r025-atm3d:
    <<: *base-default
    description: hourly 3D atmospheric data on regular r025 grid (1440x721).
    args:
      <<: *args-default
      aggregation: 6H
      request:
        <<: *request-default
        resolution: standard
        param: 131
        levtype: pl
        levelist: {{ ifs_levels }}
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/REGULARLL_grids/etc/fdb/config.yaml
      source_grid_name: era5-r025
      levels: {{ ifs_levels }}
      variables: {{ variables_atm2d }}
      
#{% if model == "IFS-NEMO" %}
  daily-native-oce2d:
    <<: *base-default
    description: daily 2D oceanic data on native grid eORCA12.
    args:
      <<: *args-default
      aggregation: M
      savefreq: D
      request:
        <<: *request-default
        resolution: high
        param: 263000
        levtype: o2d
    metadata:
      <<: *metadata-default
      fdb_path: /project/project_465000454/experiments/{{ expver }}/fdb/NATIVE_grids/etc/fdb/config.yaml
      variables: {{ variables_oce2d }}
      source_grid_name: eORCA12-2d

  daily-native-oce3d:
    <<: *base-default
    description: daily 3D oceanic data on native grid eORCA12.
    args:
      <<: *args-default
      aggregation: D
      savefreq: D
      request:
        <<: *request-default
        resolution: high
        param: 263500
        levtype: o3d
        levelist: {{ nemo_levellist }}
    metadata:
      <<: *metadata-default
      fdb_path: /project/project_465000454/experiments/{{ expver }}/fdb/NATIVE_grids/etc/fdb/config.yaml
      levels: {{ nemo_levels }}
      variables: {{ variables_oce3d }}
      source_grid_name: eORCA12-3d-level


  daily-r025-oce2d:
    <<: *base-default
    description: daily 2D oceanic data on regular r025 grid (1440x721).
    args:
      <<: *args-default
      aggregation: M
      savefreq: D
      request:
        <<: *request-default
        resolution: standard
        param: 263000
        levtype: o2d
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/REGULARLL_grids/etc/fdb/config.yaml
      variables: {{ variables_oce2d }}
      source_grid_name: nemo-multiIO-r025

  daily-r025-oce3d:
    <<: *base-default
    description: daily 3D oceanic data on regular r025 grid (1440x721).
    args:
      <<: *args-default
      aggregation: D
      savefreq: D
      request:
        <<: *request-default
        resolution: standard
        param: 263500
        levtype: o3d
        levelist: {{ nemo_levellist }}
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/REGULARLL_grids/etc/fdb/config.yaml
      levels: {{ nemo_levels }}
      variables: {{ variables_oce3d }}
      source_grid_name: nemo-multiIO-r025-3d

  daily-hpz7-oce2d:
    <<: *base-default
    description: daily 2D oceanic data on healpix grid (zoom=7, h128).
    args:
      <<: *args-default
      aggregation: M
      savefreq: D
      request:
        <<: *request-default
        resolution: standard
        param: 263000
        levtype: o2d
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/HEALPIX_grids/etc/fdb/config.yaml
      variables: {{ variables_oce2d }}
      source_grid_name: nemo-hpz7-nested

  daily-hpz10-oce2d:
    <<: *base-default
    description: daily 2D oceanic data on healpix grid (zoom=10, h1024).
    args:
      <<: *args-default
      aggregation: M
      savefreq: D
      request:
        <<: *request-default
        resolution: high
        param: 263000
        levtype: o2d
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/HEALPIX_grids/etc/fdb/config.yaml
      variables: {{ variables_oce2d }}
      source_grid_name: nemo-hpz10-nested

  daily-hpz7-oce3d:
    <<: *base-default
    description: daily 3D oceanic data on healpix grid (zoom=7, h128).
    args:
      <<: *args-default
      aggregation: D
      savefreq: D
      request:
        <<: *request-default
        resolution: standard
        param: 263500
        levtype: o3d
        levelist: {{ nemo_levellist }}
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/HEALPIX_grids/etc/fdb/config.yaml
      levels: {{ nemo_levels }}
      variables: {{ variables_oce3d }}
      source_grid_name: nemo-hpz7-nested-3d

  daily-hpz10-oce3d:
    <<: *base-default
    description: daily 3D oceanic data on healpix grid (zoom=10, h1024).
    args:
      <<: *args-default
      aggregation: D
      savefreq: D
      request:
        <<: *request-default
        resolution: high
        param: 263500
        levtype: o3d
        levelist:{{ nemo_levellist }}
    metadata:
      <<: *metadata-default
      fdb_path: 
        /project/project_465000454/experiments/{{ expver }}/fdb/HEALPIX_grids/etc/fdb/config.yaml
      levels: {{ nemo_levels }}
      variables: {{ variables_oce3d }}
      source_grid_name: nemo-hpz10-nested-3d
{% endif %}