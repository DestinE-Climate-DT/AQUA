# Create the environment:
# mamba env create -f common_environment.yml 
# or if you really want to use conda
# conda env create -f common_environment.yml

name: common_environment
channels:
  - conda-forge
  - numba
# please note that some of these dependencies are made explicit on purpose, but are not directly required by conda/mamba
dependencies:
  - python>=3.9,<3.11
  - libnetcdf 
  - netcdf4
  - xarray
  - dask
  - numpy
  - numba
  - ecCodes      
  - matplotlib
  - cartopy
  - cfunits
  - metpy
  - cdo>=2.2.0 #for healpix support
  - intake
  - intake-xarray
  - ruamel.yaml
# these below are only required for running notebooks
  - ipykernel
  - healpy
# these below are only required for tests
  - pytest
  - pytest-cov
  - coverage[toml]
  - pandoc
  - pycobertura
  # these below are only required for documentation
  - sphinx
  - sphinx-rtd-theme
  - python-cdo
  - xesmf
  - tempest-extremes
  - wand # just for plotting
# these are pip-based since it provides more recent versions or packages unavailable on conda-forge
  - pip
  - pip:
    - -e ./diagnostics/teleconnections/[all] 
    - sparse
    - dask_jobqueue
    - docker
    - gribscan
    - smmregrid
    - ECmean4
    - fast_histogram
    - boost_histogram
    - dask_histogram
    # get OPA
    - git+https://oauth2:-nnxqtXxyrs3LrJubtH1@earth.bsc.es/gitlab/digital-twins/de_340/one_pass.git@v0.3.3
    - git+https://github.com/ecmwf/pyfdb.git@master
    - git+https://oauth2:NrMi_dshtmNeaWy9F3sz@earth.bsc.es/gitlab/digital-twins/de_340/gsv_interface.git
    # pip install -e of AQUA itself
    - -e .
    
