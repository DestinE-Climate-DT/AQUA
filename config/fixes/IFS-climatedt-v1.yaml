fixer_name:
    ifs-destine-v1:
        data_model: ifs
        deltat: 3600
        delete: [tprate]

        vars:
            # Derive precipitation from TP and drop tprate
            mtpr: # https://codes.ecmwf.int/grib/param-db/235055
                nanfirst: true
                source: tp
                grib: true
            # Evaporation and snowfall
            mer: # https://codes.ecmwf.int/grib/param-db/?id=235043
                source: e
                grib: true
                src_units: m
                nanfirst: True # option to fix ifs bug in destine-v1, see below
                #units: kg m**-2 s**-1
            msr: # https://codes.ecmwf.int/grib/param-db/?id=235031
                source: sf
                grib: true
                src_units: m
                nanfirst: True
                #units: kg m**-2 s**-1
            # Latent and sensible heat
            mslhf: # https://codes.ecmwf.int/grib/param-db/?id=235034
                source: slhf
                grib: true
                nanfirst: True
            msshf:
                source: sshf
                grib: true
                nanfirst: True
            # Surface fluxes
            msnswrf:
                source: ssr
                grib: true
                nanfirst: True
            msnlwrf:
                source: str
                grib: true
                nanfirst: True
            msdwlwrf:
                source: strd
                grib: true
                nanfirst: True
            msdwswrf:
                source: ssrd
                grib: true
                nanfirst: True
            # TOA fluxes
            mtnswrf:
                source: tsr
                grib: true
                nanfirst: True
            mtnlwrf:
                source: ttr
                grib: true
                nanfirst: True
            mtdwswrf:
                source: tisr
                grib: true
                nanfirst: True      
            # Wind stresses
            metss: # https://codes.ecmwf.int/grib/param-db/?id=235041
                source: ewss
                grib: true
                nanfirst: True
            mntss: # https://codes.ecmwf.int/grib/param-db/?id=235042 
                source: nsss
                grib: true
                nanfirst: True
            # Runoffs
            msror:  # https://codes.ecmwf.int/grib/param-db/?id=235020
                source: sro
                grib: true
                nanfirst: True
            mssror: # https://codes.ecmwf.int/grib/param-db/?id=235021
                source: ssro
                grib: true
                nanfirst: True

    ifs-nemo-destine-v1-monthly:
        # multio saves 2t as mean2t if it averages. This is pretty weird and we have to fix it back.
        parent: ifs-destine-v1
        vars:
            2t: 
                source: mean2t
                grib: true

    ifs-nemo-destine-v2-monthly:
        # multio saves 2t as mean2t if it averages. This is pretty weird and we have to fix it back.
        parent: ifs-destine-v1
        deltat: monthly
        vars:
            2t: 
                source: mean2t
                grib: true
            avg_tos:
                source: sst
                grib: true
            mtpr: # https://codes.ecmwf.int/grib/param-db/235055
                source: mtpr
                grib: True
            mtnswrfcs:
                source: tsrc
                grib: true
            mtnlwrfcs:
                source: ttrc
                grib: true
            msnswrfcs:
                source: ssrc
                grib: true
            msnlwrfcs:
                source: strc
                grib: true
            msdwswrfcs:
                source: ssrdc
                grib: true

    ifs-nemo-destine-v1-nan:  # special version for historical-1990 IFS-NEMO data, fixing to nan first step of month
        parent: ifs-destine-v1
         # The nanfirst keys fix to NaN the first step of each month
        # for cumulated variables of this experiment
        # The fix is activated by specifying nanfirst_enddate
        # The dates are exclusive (the first step is actually ok and will be kept)
        nanfirst_startdate: 1990-01-01
        nanfirst_enddate: 1999-10-01

    ifs-nemo-destine-v1-nan-lowres:  # special version for historical-1990-dev-lowres IFS-NEMO data, fixing to nan first step of month
        parent: ifs-destine-v1
        nanfirst_startdate: 1990-01-01
        nanfirst_enddate: 2050-01-01

    ifs-fesom-destine-v1-nan:  # special version for historical-1990 IFS-FESOM data, fixing to nan first step of month
        parent: ifs-destine-v1
        nanfirst_startdate: 1990-01-01
        nanfirst_enddate: 2020-01-01

