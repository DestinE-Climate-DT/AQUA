plugins:
  source:
  - module: intake_xarray
sources:
  short: &short-default
    metadata: &metadata-default
      source_grid_name: tco79
      test-key: test-value
    args:
      chunks:
        time: 1
      urlpath:
      - ./AQUA_tests/models/IFS/short/IFS2d.tco79.nc
    description: original 2d output
    driver: netcdf
  short_override:  # source to test override functionality
    <<: *short-default
    metadata:
      <<: *metadata-default
      source_grid_name: tco79-nn
  short_masked:
    metadata:
      source_grid_name: tco79-testmask
      fixer_name: ifs-ci-test
    args:
      chunks:
        time: 1
      urlpath:
      - ./AQUA_tests/models/IFS/short/IFS2d.tco79.nc
    description: original 2d output
    driver: netcdf
  short_masked-coord-test:
    metadata:
      source_grid_name: tco79-testmask
      fixer_name: ifs-ci-coords
    args:
      chunks:
        time: 1
      urlpath:
      - ./AQUA_tests/models/IFS/short/IFS2d.tco79.nc
    description: original 2d output
    driver: netcdf
  short_nn:
    metadata:
      source_grid_name: tco79-nn
    args:
      chunks:
        time: 1
      urlpath:
      - ./AQUA_tests/models/IFS/short/IFS2d.tco79.nc
    description: original 2d output
    driver: netcdf
  long:
    metadata:
      source_grid_name: lon-lat
    args:
      chunks:
        time: 1
      urlpath:
      - ./AQUA_tests/models/IFS/long/regridded_r18x9.nc
    description: coarse IFS data 1y
    driver: netcdf
  intake-esm-test:
    driver: intake_esm.esm_datastore
    description: Test Intake-ESM Catalog
    args:
      obj: ./config/machines/ci/catalog/IFS/test-esm.json
    metadata:
      source_grid_name: lon-lat
      query:
        experiment: historical
        frequency: hourly
  teleconnections:
    metadata:
      source_grid_name: lon-lat
    args:
      chunks:
        time: 1
      urlpath:
      - ./AQUA_tests/models/IFS/teleconnections/nao_test.nc
      - ./AQUA_tests/models/IFS/teleconnections/enso_test.nc
    description: teleconnections catalogue
    driver: netcdf
  lra-r100-monthly:
    driver: netcdf
    description: LRA data monthly at r100
    args:
      urlpath: lra_test/IFS/test-tco79/r100/monthly/*test-tco79_r100_monthly_*.nc
      chunks: {}
      xarray_kwargs:
        decode_times: true
    metadata:
      source_grid_name: lon-lat
