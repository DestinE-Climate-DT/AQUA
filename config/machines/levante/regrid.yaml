gridpath: &gridpath /work/bb1153/b382075/nextgems/grids # to be put in the config.yaml
weightspath: &weightspath /work/bb1153/b382075/nextgems/weights #config.yaml
areaspath: &areaspath /work/bb1153/b382075/nextgems/weights #config.yaml (fare una cartella diversa per le aree??)

#templates
weights:
  template_default: weights_{model}_{exp}_{source}_{method}_{targetgrid}_l{level}.nc
  template_grid: weights_{sourcegrid}_{method}_{targetgrid}_l{level}.nc
areas:
  template_default: cell_area_{model}_{exp}_{source}.nc
  template_grid: cell_area_{grid}.nc
cdo-paths: # to be checked
  download: *weightspath
  icon: /pool/data/ICON

#available grids
grids:
 #healpix: {gridpath}/healpix/icon_hpx{zoom}_atm_2d.nc 
 #IFs
  tco3999: 
    path: /work/bm1344/AWI/nextGEMS_Cycle2_IFS/tcogrids/2.8km/tcogrids/tco3999_grid.nc
    space_coord: ["value"]
  tco2559: #tco2559 e tco2559-masked si possono unificare?
    path: /work/bm1344/AWI/nextGEMS_Cycle2_IFS/tcogrids/4km/tcogrids/tco2559_grid.nc
    space_coord: ["value"]
  tco2559-masked:
    path: 
      2d: /work/bb1153/b382076/AQUA-archive/grids/IFS/tco2559_grid.nc
      2dm: /work/bb1153/b382076/AQUA-archive/grids/IFS/tco2559_grid_masked.nc
      masked_vars:
        - ci
        - sst
      vert_coord: ["2d", "2dm"]
      space_coord: ["value"]
  tco1279:  #tco1279 e tco1279-masked si possono unificare?
    path: /work/bm1344/AWI/nextGEMS_Cycle2_IFS/tcogrids/9km/tcogrids/tco1279_grid.nc
    space_coord: ["value"]
  tco1279-masked:
    path: 
      2d: /work/bb1153/b382076/AQUA-archive/grids/IFS/tco1279_grid.nc
      2dm: /work/bb1153/b382076/AQUA-archive/grids/IFS/tco1279_grid_masked.nc
    masked_vars:
      - ci
      - sst
    vert_coord: ["2d", "2dm"]
    space_coord: ["value"]
  ifs_interpolated: 
    path: /work/bb1153/b382075/nextgems/grids/ifs_interpolated5400x2700.nc
    space_coord: ["lon", "lat"]
  tco1279_tests:
    path: /work/bb1153/b382075/aqua/test_datasets/AQUA_tests/grids/tco79_grid.nc
    space_coord: ["cell"]
  multio_r025:
    space_coord: ["value"]
    extra: -setgrid,/work/bb1153/b382075/nextgems/grids/grid_lonlat_025.txt
    cellareas: /work/bb1153/b382075/nextgems/grids/cellarea_unstructured_025.nc
    cellarea_var: cell_area

  #ICON
  icon_R02B08_atm:
    path: /pool/data/ICON/grids/public/mpim/0033/icon_grid_0033_R02B08_G.nc
    space_coord: ["cell"]
    extra: -selname,cell_index
  icon_R02B09_atm:
    path: /pool/data/ICON/grids/public/mpim/0015/icon_grid_0015_R02B09_G.nc
    space_coord: ["cell"]
    extra: -selname,cell_index
  icon_R02B09_oce:  #not working!!! wrong vert coordinates?
    path: /pool/data/ICON/grids/public/mpim/0015/icon_grid_0015_R02B09_G.nc
    space_coord: ["cell"]
    extra: -selname,cell_index
    vert_coord: ["depth_half", "depth_full"]
  icon_R02B09_intaketest: 
      path: /pool/data/ICON/grids/public/mpim/0015/icon_grid_0015_R02B09_G.nc
      extra: -selname,cell_index
      space_coord: ["ncells"]
  icon_ngc3026_default:
    default:
      path:
        2d: /work/bb1153/b382075/nextgems/grids/healpix/icon_hpx{zoom}_atm_2d.nc   # this is the default 2d grid
        2dm: /work/bb1153/b382075/nextgems/grids/healpix/icon_hpx{zoom}_oce_2d.nc  # this is an additional and optional 2d grid used if data are masked
        depth_full: /work/bb1153/b382075/nextgems/grids/healpix/icon_hpx{zoom}_oce_depth_full.nc
        depth_half: /work/bb1153/b382075/nextgems/grids/healpix/icon_hpx{zoom}_oce_depth_half.nc
      masked:   # This is the attribute used to distinguish variables which should go into the masked category
        component: ocean
      space_coord: ["cell"]
      vert_coord: ["depth_half", "depth_full"]
    lra-r100-monthly: 
      space_coord: ["lon", "lat"]
  icon_ngc3028_default:
    default:
      path:
        2d: /work/bb1153/b382075/nextgems/grids/healpix/icon_hpx{zoom}_atm_2d.nc   # this is the default 2d grid
        2dm: /work/bb1153/b382075/nextgems/grids/healpix/icon_hpx{zoom}_oce_2d.nc  # this is an additional 2d grid used if data are masked
        depth_full: /work/bb1153/b382075/nextgems/grids/healpix/icon_hpx{zoom}_oce_depth_full.nc
        depth_half: /work/bb1153/b382075/nextgems/grids/healpix/icon_hpx{zoom}_oce_depth_half.nc
      masked:   # This is the attribute used to distinguish variables which should go into the masked category
        component: ocean
      space_coord: ["cell"]
      vert_coord: ["depth_half", "depth_full"]
    lra-r100-monthly: 
      space_cooord: ["lon", "lat"]

    #FESOM
    tco2559_interpolated_2d:
      path: /work/bb1153/b382075/nextgems/grids/fesom_tco2559_interpolated_2d.nc
      space_coord: ["lon", "lat"]

    tco2559_interpolated_3d:
      path: /work/bb1153/b382075/nextgems/grids/fesom_tco2559_interpolated_3d.nc
      space_coord: ["lon", "lat"]
      vert_coord: depth

    ng5_2d:
      path: /work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc
      space_coord: ["nod2"]
      extra:
      - -setgrid,/work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc
      - -selname,cell_area

    ng5_3d:
      path:
        nz: /work/bb1153/b382075/nextgems/grids/NG5_nodes_fesom_mask_nz.nc
        nz1: /work/bb1153/b382075/nextgems/grids/NG5_nodes_fesom_mask_nz1.nc
      space_coord: ["nod2"]
      vert_coord: ["nz", "nz1"]
      extra: 
      - -setgrid,/work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc 
    
    ng5_3d_elem:
      path: 
        nz1: /work/bb1153/b382075/nextgems/grids/NG5_elem_fesom_mask_nz1.nc
      space_coord: ["elem"]
      vert_coord: ["nz1"]
      extra: 
      - -setgrid,/work/bb1153/b382075/nextgems/grids/NG5_griddes_elem_IFS.nc 
  
  r005: r7200x3600
  r010: r3600x1800
  r020: r1800x900
  r025: r1440x720
  r050: r720x360
  r100: r360x180
  r200: r180x90
  r250: r144x72

# couple grids to experiment and sources
source_grids: 
  IFS:
    default:   
      space_coord: ["lon", "lat"]
    
    control-1950-devcon:
      default:
        space_coord: ["lon", "lat"]
    historical-1990-devcon:
      default:
        space_coord: ["lon", "lat"]
        
    tco3999-ng5:
      ICMGG_atm2d: tco3999
      ICMU_atm2d: tco3999
      ICMU_atm3d: tco3999
      interpolated_global: ifs_interpolated

    tco2559-ng5:
      default:   
        space_coord: ["lon", "lat"]
      ICMGG_atm2d: tco2559-masked
      ICMU_atm2d: tco2559
      ICMU_atm3d: tco2559
      interpolated_global: ifs_interpolated

    tco2559-ng5-cycle3:
      default: 
        space_coord: ["lon", "lat"]
      2D_1h_native: tco2559-masked
      3D_1h_native: tco2559
      2D_monthly_native: tco2559
      3D_monthly_native: tco2559
      WAM_1h_native: tco1279
      2D_monthly_0.25deg: multio_r025
      3D_monthly_0.25deg: multio_r025
        
    tco1279-orca025-cycle3:
      default: 
        space_coord: ["lon", "lat"]
      2D_1h_native: tco1279-masked
      3D_1h_native: tco1279
      2D_monthly_native: tco1279
      3D_monthly_native: tco1279
      WAM_1h_native: tco1279
      2D_monthly_0.25deg: multio_r025
      3D_monthly_0.25deg: multio_r025
      2D_1h_0.25deg:: multio_r025
      3D_1h_0.25deg:: multio_r025
    
    tco1279-orca025:
      default: 
        space_coord: ["lon", "lat"]
      ICMGG_atm2d: tco1279-masked
      ICMU_atm2d: tco1279
      ICMU_atm3d: tco1279
  
    test-tco2559:
      ICMGG_atm2d: tco2559
      ICMU_atm3d: tco2559

    test-tco79:
      long:
        space_coord:
          - lon
          - lat
      short: tco1279_tests

  ICON:
    ngc2009:
      default:  
        space_coord: ["lon", "lat"]
      atm_2d_ml: icon_R02B09_atm
      atm_2d_ml_R02B09: icon_R02B09_atm
      atm_2d_ml_R02B08: icon_R02B08_atm
      oce_200m_atmgrid_R02B09: icon_R02B09_oce
      intake-esm-test: icon_R02B09_intaketest

    ngc3026:
      default: icon_ngc3026_default
      lra-r100-monthly: 
        space_coord: ["lon", "lat"]

    ngc3028:
      default: icon_ngc3028_default
      lra-r100-monthly: 
        space_coord: ["lon", "lat"]

  FESOM:
    tco3999-ng5:
      default:  
        space_coord: ["lon", "lat"]
      interpolated_global2d: tco2559_interpolated_2d
      interpolated_global_TS: tco2559_interpolated_3d
      interpolated_global_UV: tco2559_interpolated_3d
      original_2d: ng5_2d
      original_3d: ng5_3d
      original_3d_elem: ng5_3d_elem
   
    tco2559-ng5:
      default:  
        space_coord: ["lon", "lat"]
      interpolated_global2d: tco2559_interpolated_2d
      interpolated_global_TS: tco2559_interpolated_3d
      interpolated_global_UV: tco2559_interpolated_3d
      original_2d: ng5_2d
      original_3d: ng5_3d
      original_3d_elem: ng5_3d_elem

tco2559-ng5-cycle3:
    default:  # default covers all simple cases where this can be computed automatically (eg LRA)
      space_coord: ["lon", "lat"]
    2D_monthly_native: ng5_2d
      #space_coord: ['nod2']
      #extra: 
      #  - -setgrid,/work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc 
    2D_1h_native:
      space_coord: ['nod2']
      extra: 
        - -setgrid,/work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc 
    2D_daily_native:
      space_coord: ['nod2']
      extra: 
        - -setgrid,/work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc 
    2D_monthly_native_elem:
      space_coord: ['elem']
      extra: 
        - -setgrid,/work/bm1235/a270046/meshes/NG5_griddes_elems_IFS.nc 
    3D_daily_native:
      path: 
        nz: /work/bb1153/b382075/nextgems/grids/NG5_nodes_fesom_mask_nz.nc
        nz1: /work/bb1153/b382075/nextgems/grids/NG5_nodes_fesom_mask_nz1.nc
      space_coord: ["nod2"]
      vert_coord: ["nz", "nz1"]
      extra: 
        - -setgrid,/work/bb1153/b382075/nextgems/grids/NG5_griddes_nodes_IFS.nc 
    3D_daily_native_zarr:
      path: 
        nz1: /work/bb1153/b382075/nextgems/grids/NG5_nodes_fesom_mask_nz1.nc
      space_coord: ["nod2"]
      vert_coord: ["nz1"]
      extra: 
        - -setgrid,/work/bb1153/b382075/nextgems/grids/NG5_griddes_nodes_IFS.nc 
    3D_daily_native_elem:
      space_coord: ["elem"]
      path:
        nz1: /work/bb1153/b382075/nextgems/grids/NG5_elem_fesom_mask_nz1.nc
      vert_coord: ["nz1"]
      extra: 
        - -setgrid,/work/bb1153/b382075/nextgems/grids/NG5_griddes_elems_IFS.nc 

test-ng5:
      original_2d:
        path: /work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc
        space_coord:
        - nod2
        extra:
        - -setgrid,/work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc
        - -selname,cell_area
      original_3d:
        path: /work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc
        space_coord:
        - nod2
        extra:
        - -setgrid,/work/bm1235/a270046/meshes/NG5_griddes_nodes_IFS.nc
        - -selname,cell_area
    test-pi:
      original_2d:
        path: /work/bb1153/b382075/aqua/test_datasets/AQUA_tests/grids/pi_griddes_nodes_IFS.nc
        space_coord:
        - nod2
        extra:
          - -setgrid,/work/bb1153/b382075/aqua/test_datasets/AQUA_tests/grids/pi_griddes_nodes_IFS.nc
          - -selname,cell_area
      original_3d:
        path: 
          nz1: /work/bb1153/b382075/aqua/test_datasets/AQUA_tests/grids/pi_fesom_mask_nz1.nc
          nz: /work/bb1153/b382075/aqua/test_datasets/AQUA_tests/grids/pi_fesom_mask_nz.nc
        space_coord: ["nod2"]
        vert_coord: ["nz1", "nz"]
        extra: 
          - -setgrid,/work/bb1153/b382075/aqua/test_datasets/AQUA_tests/grids/pi_griddes_nodes_IFS.nc 

  MSWEP:
    past:
      default:
        space_coord:
        - lon
        - lat
  AVISO:
    ssh-L4:
      default:
        space_coord:
        - longitude
        - latitude
  PHC3:
    phc3:
      default:
        space_coord:
        - lon
        - lat
  WOA18:
    woa18_2005_2017:
      default:
        path:
          depth: /work/bb1153/b382076/AQUA-archive/grids/WOA18/grid-woa18.nc
        vert_coord: depth
        space_coord: ["lon", "lat"]

  CERES:
    ebaf-toa42:
      default:
        space_coord:
        - lon
        - lat
    ebaf-toa41:
      default:
        space_coord:
        - lon
        - lat
    ebaf-sfc41:
      default:
        space_coord:
        - lon
        - lat
    ebaf-sfc42:
      default:
        space_coord:
        - lon
        - lat
    syn-toa41:
      default:
        space_coord:
        - lon
        - lat
  EN4:
    en4:
      default:
        path:
          lev: /work/bb1153/b382076/AQUA-archive/grids/EN4/en4-grid.nc
        space_coord: ["lon", "lat"]
        vert_coord: ["lev"]
  ERA5:
    era5-dkrz:
      default:
        path: /work/bb1153/b382075/nextgems/grids/n320_unstructured.nc
        space_coord: ["values"]  
    era5:
      default:
        path: 
          2d: /work/bb1153/b382075/nextgems/grids/r025_grid.nc
          2dm: /work/bb1153/b382075/nextgems/grids/r025_grid_masked.nc
        masked_vars:
          - sst
          - SSTK
        space_coord: ["lon", "lat"]
        vert_coord: ["2d", "2dm"]  # If the case is more complex than simply "2d" we need to specify this  

  OSI-SAF:
    osi-450:
      nh-monthly:
        space_coord:
        - xc
        - yc
        cellareas: /work/bb1153/b382075/nextgems/grids/grid_nh.nc
        cellarea_var: areacello
        mask: /work/bb1153/b382075/nextgems/grids/grid_nh.nc
        mask_var: sftof
      nh-daily:
        space_coord:
        - xc
        - yc
        cellareas: /work/bb1153/b382075/nextgems/grids/grid_nh.nc
        cellarea_var: areacello
        mask: /work/bb1153/b382075/nextgems/grids/grid_nh.nc
        mask_var: sftof
      sh-daily:
        space_coord:
        - xc
        - yc
        cellareas: /work/bb1153/b382075/nextgems/grids/grid_sh.nc
        cellarea_var: areacello
        mask: /work/bb1153/b382075/nextgems/grids/grid_nh.nc
        mask_var: sftof
      sh-monthly:
        space_coord:
        - xc
        - yc
        cellareas: /work/bb1153/b382075/nextgems/grids/grid_sh.nc
        cellarea_var: areacello
        mask: /work/bb1153/b382075/nextgems/grids/grid_nh.nc
        mask_var: sftof







    